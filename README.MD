# ã‹ãªã‚²ãƒ¼ãƒ 

![kana](http://127.0.0.1:8080/markdown/kana.png)

> åœ¨çº¿ä½“éªŒåœ°å€ <https://dragonir.github.io/kanaApp/>

## äº”åéŸ³å°æ¸¸æˆä¸­çš„å‰ç«¯çŸ¥è¯†

## èƒŒæ™¯

åœ¨å­¦ä¹ æ—¥è¯­çš„åˆæœŸé˜¶æ®µï¼Œæˆ‘å‘ç°æ—¥è¯­äº”åéŸ³çš„è®°å¿†å¹¶ä¸æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œå¹³å‡åçš„è®°å¿†å°¤å…¶ä»¤äººè´¹ç¥ã€‚è¿™æ—¶æˆ‘æƒ³å¦‚æœæœ‰ä¸€ä¸ªåº”ç”¨å¯ä»¥å……åˆ†åˆ©ç”¨ç¢ç‰‡æ—¶é—´ï¼Œåœ¨åˆä¼‘æˆ–åœ°é“ä¸Šéšæ—¶å¯ä»¥ç»ƒä¹ è¯¥å¤šå¥½ã€‚äºæ˜¯æœéæ•´ä¸ª `App Store`ï¼Œå•†åº—çš„è½¯ä»¶ä¸æ˜¯å«æœ‰å†…è´­ã€å¤¹å¸¦å¹¿å‘Šå°±æ˜¯åŠ¨è¾„40Mä»¥ä¸Šï¼Œæ²¡æ‰¾åˆ°ä¸€ä¸ªè‡ªå·±æ»¡æ„çš„åº”ç”¨ã€‚äºæ˜¯æ‰“ç®—è‡ªå·±é€ è½®å­å†™ä¸€ä¸ªï¼Œå› æ­¤æœ‰äº†è¯¥ç½‘é¡µåº”ç”¨å’Œæ–‡ç« çš„äº§ç”Ÿã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä¸»è¦ä»‹ç»è‡ªå·±åœ¨å¼€å‘è¿™ä¸ªåº”ç”¨è¿‡ç¨‹ä¸­çš„æ”¶è·ã€‚

## å®ç°

å®ç°æ•ˆæœå¦‚ä¸‹ï¼Œè¯¥åº”ç”¨ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé¡µé¢ï¼š

* é¦–é¡µï¼šèœå•é€‰é¡¹
* ç­”é¢˜é¡µï¼š
* ç»“æœé¡µï¼š

![app](http://127.0.0.1:8080/markdown/app.gif)

### æ·±è‰²æ¨¡å¼ âšªâš«

éšç€ `Windows 10`ã€ `MacOs`ã€ `Android` ç­‰ç³»ç»Ÿé™†ç»­æ¨å‡ºæ·±è‰²æ¨¡å¼ï¼Œæµè§ˆå™¨ä¹Ÿå¼€å§‹æ”¯æŒæ£€æµ‹ç³»ç»Ÿä¸»é¢˜è‰²é…ç½®ï¼Œè¶Šæ¥è¶Šå¤šçš„ç½‘é¡µåº”ç”¨éƒ½é…ç½®äº†æ·±è‰²æ¨¡å¼åˆ‡æ¢åŠŸèƒ½ã€‚ä¸ºäº†ä¼˜åŒ– `50éŸ³å°æ¸¸æˆ` çš„è§†è§‰ä½“éªŒï¼Œæˆ‘ä¹Ÿé…ç½®äº†æ·±è‰²æ ·å¼ï¼Œå®ç°æ•ˆæœå¦‚ä¸‹ï¼š

![dark](http://127.0.0.1:8080/markdown/dark.png)

#### `CSS` åª’ä½“æŸ¥è¯¢åˆ¤æ–­æ·±è‰²æ¨¡å¼

`prefers-color-scheme` åª’ä½“ç‰¹æ€§ç”¨äºæ£€æµ‹ç”¨æˆ·æ˜¯å¦æœ‰å°†ç³»ç»Ÿçš„ä¸»é¢˜è‰²è®¾ç½®ä¸ºäº®è‰²æˆ–è€…æš—è‰²ã€‚ä½¿ç”¨è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š

`@media (prefers-color-scheme: value) {}` å…¶ä¸­ `value` æœ‰ä»¥ä¸‹ `3` ç§å€¼ï¼Œå…¶ä¸­ï¼š

* `light`ï¼šè¡¨ç¤ºç”¨æˆ·ç³»ç»Ÿæ”¯æŒæ·±è‰²æ¨¡å¼ï¼Œå¹¶ä¸”å·²è®¾ç½®ä¸ºæµ…è‰²ä¸»é¢˜ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚
* `dark`ï¼šè¡¨ç¤ºç”¨æˆ·ç³»ç»Ÿæ”¯æŒæ·±è‰²æ¨¡å¼ï¼Œå¹¶ä¸”å·²è®¾ç½®ä¸ºæ·±è‰²ä¸»é¢˜ã€‚
* `no-preference`ï¼šè¡¨ç¤ºç”¨æˆ·ç³»ç»Ÿä¸æ”¯æŒæ·±è‰²æ¨¡å¼æˆ–æ— æ³•å¾—çŸ¥æ˜¯å¦è®¾ç½®ä¸ºæ·±è‰²æ¨¡å¼ï¼ˆå·²åºŸå¼ƒï¼‰ã€‚

> è‹¥ç»“æœä¸º `no-preference`ï¼Œæ— æ³•é€šè¿‡æ­¤åª’ä½“ç‰¹æ€§è·çŸ¥å®¿ä¸»ç³»ç»Ÿæ˜¯å¦æ”¯æŒè®¾ç½®ä¸»é¢˜è‰²ï¼Œæˆ–è€…ç”¨æˆ·æ˜¯å¦ä¸»åŠ¨å°†å…¶è®¾ç½®ä¸ºæ— åå¥½ã€‚å‡ºäºéšç§ä¿æŠ¤ç­‰æ–¹é¢çš„è€ƒè™‘ï¼Œç”¨æˆ·æˆ–ç”¨æˆ·ä»£ç†ä¹Ÿå¯èƒ½åœ¨ä¸€äº›æƒ…å†µä¸‹åœ¨æµè§ˆå™¨å†…éƒ¨å°†å…¶è®¾ç½®ä¸º `no-preference`ã€‚

ä¸‹é¢ä¾‹å­ä¸­ï¼Œå½“ç³»ç»Ÿä¸»é¢˜è‰²ä¸ºæ·±è‰²æ—¶ `.demo` å…ƒç´ çš„èƒŒæ™¯è‰²ä¸º `#FFFFFF`ï¼›å½“ç³»ç»Ÿä¸»é¢˜è‰²ä¸ºæµ…è‰²æ—¶ï¼Œ`.demo` å…ƒç´ çš„èƒŒæ™¯è‰²ä¸º `#000000`ã€‚

```css
@media (prefers-color-scheme: dark) {
  .demo { background:  #FFFFFF; }
}
@media (prefers-color-scheme: light) {
  .demo { background: #000000; }
}
```

#### `JavaScript` åˆ¤æ–­æ·±è‰²æ¨¡å¼

`window.matchMedia()` æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ `MediaQueryList` å¯¹è±¡ï¼Œè¡¨ç¤ºæŒ‡å®šçš„åª’ä½“æŸ¥è¯¢ `(en-US)å­—ç¬¦ä¸²` è§£æåçš„ç»“æœã€‚è¿”å›çš„ `MediaQueryList` å¯è¢«ç”¨äºåˆ¤å®š `Document` æ˜¯å¦åŒ¹é…åª’ä½“æŸ¥è¯¢ï¼Œæˆ–è€…ç›‘æ§ä¸€ä¸ª `document` æ¥åˆ¤å®šå®ƒåŒ¹é…äº†æˆ–è€…åœæ­¢åŒ¹é…äº†æ­¤åª’ä½“æŸ¥è¯¢ã€‚å…¶ä¸­ `MediaQueryList` å¯¹è±¡å…·æœ‰å±æ€§ `matches`å’Œ `media`ï¼Œæ–¹æ³• `addListener` å’Œ `removeListener`ã€‚

ä½¿ç”¨ `matchMedia` ä½œä¸ºåˆ¤æ–­åª’ä»‹ï¼Œä¹Ÿå¯ä»¥è¯†åˆ«ç³»ç»Ÿæ˜¯å¦æ”¯æŒä¸»é¢˜è‰²ï¼š

```js
if (window.matchMedia('(prefers-color-scheme)').media === 'not all') {
  // æµè§ˆå™¨ä¸æ”¯æŒä¸»é¢˜è‰²è®¾ç½®
}
if (window.matchMedia('(prefers-color-scheme: dark)').matches){
  // æ·±è‰²æ¨¡å¼
} else {
  // æµ…è‰²æ¨¡å¼
}
```

å¦å¤–è¿˜å¯ä»¥åŠ¨æ€ç›‘å¬ç³»ç»Ÿæ·±è‰²æ¨¡å¼çš„çŠ¶æ€ï¼Œæ ¹æ®ç³»ç»Ÿæ·±è‰²æ¨¡å¼çš„åˆ‡æ¢åšå‡ºå®æ—¶å“åº”ï¼š

```js
window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
  if (e.matches) {
    // å¼€å¯æ·±è‰²æ¨¡å¼
  } else {
    // å…³é—­æ·±è‰²æ¨¡å¼
  }
});
```

æˆ–è€…å•ç‹¬æ£€æµ‹æ·±è‰²æˆ–æµ…è‰²æ¨¡å¼ï¼š

```js
const listeners = {
  dark: (mediaQueryList) => {
    if (mediaQueryList.matches) {
      // å¼€å¯æ·±è‰²æ¨¡å¼
    }
  },
  light: (mediaQueryList) => {
    if (mediaQueryList.matches) {
      // å¼€å¯æµ…è‰²æ¨¡å¼
    }
  }
};
window.matchMedia('(prefers-color-scheme: dark)').addListener(listeners.dark);
window.matchMedia('(prefers-color-scheme: light)').addListener(listeners.light);
```

#### `HTML` å…ƒç´ ä¸­åˆ¤æ–­æ·±è‰²æ¨¡å¼

é¡µé¢ä½¿ç”¨å›¾ç‰‡å…ƒç´ æ—¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ `HTML` ä¸­åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦å¼€å¯æ·±è‰²æ¨¡å¼ã€‚å¦‚ï¼š

```html
<picture>
  <source srcset="dark.png" media="(prefers-color-scheme: dark)">
  <img src="light.png">
</picture>
```

`picture` å…ƒç´ å…è®¸æˆ‘ä»¬åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šæ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡ï¼Œä¸€èˆ¬ç”¨äºå“åº”å¼ã€‚`HTML5` å¼•å…¥äº† `<picture>` å…ƒç´ ï¼Œè¯¥å…ƒç´ å¯ä»¥è®©å›¾ç‰‡èµ„æºçš„è°ƒæ•´æ›´åŠ çµæ´»ã€‚`<picture>` å…ƒç´ é›¶æˆ–å¤šä¸ª `<source>` å…ƒç´ å’Œä¸€ä¸ª `<img>` å…ƒç´ ï¼Œæ¯ä¸ª `<source>` å…ƒç´ åŒ¹é…ä¸åŒçš„è®¾å¤‡å¹¶å¼•ç”¨ä¸åŒçš„å›¾åƒæºï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…çš„ï¼Œå°±é€‰æ‹© `<img>` å…ƒç´ çš„ `src` å±æ€§ä¸­çš„ `url`ã€‚

> æ³¨æ„: `<img>` å…ƒç´ æ˜¯æ”¾åœ¨æœ€åä¸€ä¸ª `<picture>` å…ƒç´ ä¹‹åï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒè¯¥å±æ€§åˆ™æ˜¾ç¤º `<img>` å…ƒç´ çš„çš„å›¾ç‰‡ã€‚

### ç¦»çº¿ç¼“å­˜

ä¸ºäº†èƒ½å¤ŸåƒåŸç”Ÿåº”ç”¨ä¸€æ ·å¯ä»¥åœ¨æ¡Œé¢ç”Ÿæˆå¿«æ·æ–¹å¼å¿«é€Ÿè®¿é—®ï¼Œéšæ—¶éšåœ°ç¦»çº¿ä½¿ç”¨ï¼Œ`50éŸ³å°æ¸¸æˆ` ä½¿ç”¨äº†ç¦»çº¿ç¼“å­˜æŠ€æœ¯ï¼Œå®ƒæ˜¯ä¸€ä¸ª `PWAåº”ç”¨` ã€‚ä¸‹é¢å†…å®¹æ˜¯ `PWAç¦»çº¿åº”ç”¨` å®ç°æŠ€æœ¯çš„ç®€è¦æè¿°ã€‚

> `PWA (progressing web app)`ï¼Œæ¸è¿›å¼ç½‘é¡µåº”ç”¨ç¨‹åºï¼Œæ˜¯ `ä¸‹ä¸€ä»£WEBåº”ç”¨æ¨¡å‹`ã€‚ä¸€ä¸ª `PWA` åº”ç”¨é¦–å…ˆæ˜¯ä¸€ä¸ªç½‘é¡µ, å¹¶å€ŸåŠ©äº `App Manifest` å’Œ `Service Worker` æ¥å®ç°å®‰è£…å’Œç¦»çº¿ç­‰åŠŸèƒ½ã€‚

ç‰¹ç‚¹ï¼š

* æ¸è¿›å¼ï¼šé€‚ç”¨äºé€‰ç”¨ä»»ä½•æµè§ˆå™¨çš„æ‰€æœ‰ç”¨æˆ·ï¼Œå› ä¸ºå®ƒæ˜¯ä»¥æ¸è¿›å¼å¢å¼ºä½œä¸ºæ ¸å¿ƒå®—æ—¨æ¥å¼€å‘çš„ã€‚
* è‡ªé€‚åº”ï¼šé€‚åˆä»»ä½•æœºå‹ï¼šæ¡Œé¢è®¾å¤‡ã€ç§»åŠ¨è®¾å¤‡ã€å¹³æ¿ç”µè„‘æˆ–ä»»ä½•æœªæ¥è®¾å¤‡ã€‚
* è¿æ¥æ— å…³æ€§ï¼šèƒ½å¤Ÿå€ŸåŠ©äºæœåŠ¡å·¥ä½œçº¿ç¨‹åœ¨ç¦»çº¿æˆ–ä½è´¨é‡ç½‘ç»œçŠ¶å†µä¸‹å·¥ä½œã€‚
* ç¦»çº¿æ¨é€ï¼šä½¿ç”¨æ¨é€æ¶ˆæ¯é€šçŸ¥ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬çš„åº”ç”¨åƒ `Native App` ä¸€æ ·ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
* åŠæ—¶æ›´æ–°ï¼šåœ¨æœåŠ¡å·¥ä½œçº¿ç¨‹æ›´æ–°è¿›ç¨‹çš„ä½œç”¨ä¸‹æ—¶åˆ»ä¿æŒæœ€æ–°çŠ¶æ€ã€‚
* å®‰å…¨æ€§ï¼šé€šè¿‡ `HTTPS` æä¾›ï¼Œä»¥é˜²æ­¢çª¥æ¢å’Œç¡®ä¿å†…å®¹ä¸è¢«ç¯¡æ”¹ã€‚

#### é…ç½®é¡µé¢å‚æ•°

åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ æ–‡ä»¶ `manifest.webmanifest` æˆ– `manifest.json` æ–‡ä»¶ï¼Œå¹¶åœ¨æ–‡ä»¶å†…å†™å…¥å¦‚ä¸‹é…ç½®ä¿¡æ¯ï¼Œæœ¬ä¾‹ä¸­ `50éŸ³å°æ¸¸æˆ` çš„é¡µé¢å‚æ•°ä¿¡æ¯é…ç½®å¦‚ä¸‹ï¼š

```json
// manifest.webmainifest
{
  "name": "ã‹ãªã‚²ãƒ¼ãƒ ",
  "short_name": "ã‹ãªã‚²ãƒ¼ãƒ ",
  "start_url": "index.html",
  "display": "standalone",
  "background_color": "#fff",
  "description": "ã‹ãªã‚²ãƒ¼ãƒ ",
  "icons": [
    {
      "src": "assets/images/icon-64x64.png",
      "sizes": "64x64",
      "type": "image/png"
    },
    {
      "src": "assets/images/icon-256x256.png",
      "sizes": "256x256",
      "type": "image/png"
    }
  ]
}
```

å‚æ•°è¯´æ˜ï¼š

* `name`ï¼š`Web App` çš„åç§°ï¼Œä¹Ÿæ˜¯ä¿å­˜åˆ°æ¡Œé¢ä¸Šæ—¶åº”ç”¨å›¾æ ‡çš„åç§°ã€‚
* `short_name`ï¼š`name` è¿‡é•¿æ—¶ï¼Œå°†ä¼šä½¿ç”¨ `short_name` ä»£æ›¿ `name` æ˜¾ç¤ºï¼Œæ˜¯ `Web App` çš„ç®€ç§°ã€‚
* `start_url`ï¼šæŒ‡å®šäº†ç”¨æˆ·æ‰“å¼€è¯¥ `Web App` æ—¶åŠ è½½ `URL`ã€‚`URL` ä¼šç›¸å¯¹äº `manifest` æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚
* `display`ï¼šæŒ‡å®šäº†åº”ç”¨çš„æ˜¾ç¤ºæ¨¡å¼ï¼Œå®ƒæœ‰å››ä¸ªå€¼å¯ä»¥é€‰æ‹©ï¼š
  * `fullscreen`ï¼šå…¨å±æ˜¾ç¤ºï¼Œä¼šå°½å¯èƒ½å°†æ‰€æœ‰çš„æ˜¾ç¤ºåŒºåŸŸéƒ½å æ»¡ã€‚
  * `standalone`ï¼šæµè§ˆå™¨ç›¸å…³ `UI`ï¼ˆå¦‚å¯¼èˆªæ ã€å·¥å…·æ ç­‰ï¼‰å°†è¢«éšè—ï¼Œçœ‹èµ·æ¥æ›´åƒä¸€ä¸ª `Native App`ã€‚
  * `minimal-ui`ï¼šæ˜¾ç¤ºå½¢å¼ä¸ `standalone` ç±»ä¼¼ï¼Œæµè§ˆå™¨ç›¸å…³ `UI` ä¼šæœ€å°åŒ–ä¸ºä¸€ä¸ªæŒ‰é’®ï¼Œä¸åŒæµè§ˆå™¨åœ¨å®ç°ä¸Šç•¥æœ‰ä¸åŒã€‚
  * `browser`ï¼šä¸€èˆ¬æ¥è¯´ï¼Œä¼šå’Œæ­£å¸¸ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€æ ·å¼ä¸€è‡´ã€‚
  * éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå½“ä¸€äº›ç³»ç»Ÿçš„æµè§ˆå™¨ä¸æ”¯æŒ `fullscreen` æ—¶å°†ä¼šæ˜¾ç¤ºæˆ `standalone` æ•ˆæœï¼Œå½“ä¸æ”¯æŒ `standalone` æ—¶ï¼Œå°†ä¼šæ˜¾ç¤ºæˆ `minimal-ui` çš„æ•ˆæœï¼Œä»¥æ­¤ç±»æ¨ã€‚
* `description`ï¼šåº”ç”¨æè¿°ã€‚
* `icons`ï¼šæŒ‡å®šäº†åº”ç”¨çš„æ¡Œé¢å›¾æ ‡å’Œå¯åŠ¨é¡µå›¾åƒï¼Œç”¨æ•°ç»„è¡¨ç¤ºï¼š
  * sizesï¼šå›¾æ ‡å¤§å°ã€‚é€šè¿‡æŒ‡å®šå¤§å°ï¼Œç³»ç»Ÿä¼šé€‰å–æœ€åˆé€‚çš„å›¾æ ‡å±•ç¤ºåœ¨ç›¸åº”ä½ç½®ä¸Šã€‚
  * srcï¼šå›¾æ ‡è·¯å¾„ã€‚ç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äº `manifest` æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚
  * typeï¼šå›¾æ ‡å›¾ç‰‡ç±»å‹ã€‚ æµè§ˆå™¨ä¼šä» `icons` ä¸­é€‰æ‹©æœ€æ¥è¿‘ `128dp(px = dp * (dpi / 160))` çš„å›¾ç‰‡ä½œä¸ºå¯åŠ¨ç”»é¢å›¾åƒã€‚
* `background_color`ï¼šæŒ‡å®šå¯åŠ¨ç”»é¢çš„èƒŒæ™¯é¢œè‰²ï¼Œé‡‡ç”¨ç›¸åŒé¢œè‰²å¯ä»¥å®ç°ä»å¯åŠ¨ç”»é¢åˆ°é¦–é¡µçš„å¹³ç¨³è¿‡æ¸¡ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ”¹å–„é¡µé¢èµ„æºæ­£åœ¨åŠ è½½æ—¶çš„ç”¨æˆ·ä½“éªŒã€‚
* `theme_color`ï¼šæŒ‡å®šäº†`Web App` çš„ä¸»é¢˜é¢œè‰²ã€‚å¯ä»¥é€šè¿‡è¯¥å±æ€§æ¥æ§åˆ¶æµè§ˆå™¨ `UI` çš„é¢œè‰²ã€‚æ¯”å¦‚çŠ¶æ€æ ã€å†…å®¹é¡µä¸­çŠ¶æ€æ ã€åœ°å€æ çš„é¢œè‰²ã€‚

> é…ç½®ä¿¡æ¯è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼š<https://tomitm.github.io/appmanifest/>

#### é…ç½® `HTML` æ–‡ä»¶

åœ¨ `index.html` ä¸­å¼•å…¥ `manifest` é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨ `head` ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ä¿¡æ¯ä»¥å…¼å®¹ `iOSç³»ç»Ÿ`

```html
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes"  />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ã‹ãªã‚²ãƒ¼ãƒ ">
<link rel="stylesheet" type="text/css" href="./assets/css/main.css">
<link rel="stylesheet" type="text/css" href="./assets/css/dark.css">
<link rel="stylesheet" type="text/css" href="./assets/css/petals.css">
<link rel="shortcut icon" href="./assets/images/icon-256x256.png">
<link rel="apple-touch-icon" href="./assets/images/icon-256x256.png"/>
<link rel="apple-touch-icon-precomposed" href="./assets/images/icon-256x256.png">
<link rel="Bookmark" href="./assets/images/icon-256x256.png" />
<link rel="manifest" href="./manifest.webmanifest">
<title>ã‹ãªã‚²ãƒ¼ãƒ </title>
```

* `apple-touch-icon`: æŒ‡å®šåº”ç”¨å›¾æ ‡ï¼Œç±»ä¼¼ä¸ `manifest.json` æ–‡ä»¶çš„ `icons` é…ç½®ï¼Œä¹Ÿæ˜¯æ”¯æŒ `sizes` å±æ€§ï¼Œæ¥ä¾›ä¸åŒåœºæ™¯çš„é€‰æ‹©ã€‚
* `apple-mobile-web-app-capable`ï¼šç±»ä¼¼äº `manifest.json` ä¸­çš„ `display` çš„åŠŸèƒ½ï¼Œé€šè¿‡è®¾ç½®ä¸º `yes` å¯ä»¥è¿›å…¥ `standalone` æ¨¡å¼ã€‚
* `apple-mobile-web-app-title`ï¼šæŒ‡å®šåº”ç”¨çš„åç§°ã€‚
* `apple-mobile-web-app-status-bar-style`ï¼šæŒ‡å®šiOSç§»åŠ¨è®¾å¤‡çš„ `çŠ¶æ€æ status bar` çš„æ ·å¼ï¼Œæœ‰ `Default`ï¼Œ`Black`ï¼Œ`Black-translucent` å¯ä»¥è®¾ç½®ã€‚

#### æ³¨å†Œä½¿ç”¨ `Service Worker`

**åœ¨ `index.html` ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç è¿›è¡Œserver-workeræ³¨å†Œï¼š**

```js
window.addEventListener('load', () => {
  registerSW();
});
async function registerSW() {
  if ('serviceWorker' in navigator) {
    try {
      await navigator.serviceWorker.register('./sw.js');
    } catch (e) {
      console.log(`SW registration failed`);
    }
  }
}
```

ä½¿ç”¨ `serviceWorkerContainer.register()` è¿›è¡Œ `Service worker` æ³¨å†Œï¼ŒåŒæ—¶æ·»åŠ  `try...catch...` å®¹é”™åˆ¤æ–­ï¼Œä»¥ä¿è¯åœ¨ä¸æ”¯æŒService workerçš„æƒ…å†µä¸‹å¯ä»¥æ­£å¸¸è¿è¡Œã€‚å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯åªæœ‰åœ¨httpsä¸‹ï¼Œnavigatoré‡Œæ‰ä¼šæœ‰serviceWorkerè¿™ä¸ªå¯¹è±¡ã€‚

> `Service workers` æœ¬è´¨ä¸Šå……å½“ `Web` åº”ç”¨ç¨‹åºã€æµè§ˆå™¨ä¸ç½‘ç»œï¼ˆå¯ç”¨æ—¶ï¼‰ä¹‹é—´çš„ä»£ç†æœåŠ¡å™¨ã€‚æ—¨åœ¨åˆ›å»ºæœ‰æ•ˆçš„ç¦»çº¿ä½“éªŒï¼Œå®ƒä¼šæ‹¦æˆªç½‘ç»œè¯·æ±‚å¹¶æ ¹æ®ç½‘ç»œæ˜¯å¦å¯ç”¨é‡‡å–æ¥é€‚å½“çš„åŠ¨ä½œã€æ›´æ–°æ¥è‡ªæœåŠ¡å™¨çš„çš„èµ„æºã€‚å®ƒè¿˜æä¾›å…¥å£ä»¥æ¨é€é€šçŸ¥å’Œè®¿é—®åå°åŒæ­¥ `API`ã€‚äº†è§£æ›´å¤š `Service workder` çŸ¥è¯†å¯ä»¥è®¿é—®æ–‡ç« æœ«å°¾é“¾æ¥ `ğŸ”—`ã€‚

**åœ¨æ ¹ç›®å½•æ·»åŠ  `sw.js`ï¼Œå®šä¹‰ç¼“å­˜ä¿¡æ¯å’Œæ–¹æ³•**

```js
// å®šä¹‰ç¼“å­˜çš„keyå€¼
const cacheName = 'kana-v1';
// å®šä¹‰éœ€è¦ç¼“å­˜çš„æ–‡ä»¶
const staticAssets = [
  './',
  './index.html',
  './assets/css/main.css',
  './assets/js/main.js',
  './assets/images/bg.png'
  // ...
];

// ç›‘å¬installäº‹ä»¶ï¼Œå®‰è£…å®Œæˆåï¼Œè¿›è¡Œæ–‡ä»¶ç¼“å­˜
self.addEventListener('install', async e => {
  // æ‰¾åˆ°keyå¯¹åº”çš„ç¼“å­˜å¹¶ä¸”è·å¾—å¯ä»¥æ“ä½œçš„cacheå¯¹è±¡
  const cache = await caches.open(cacheName);
  // å°†éœ€è¦ç¼“å­˜çš„æ–‡ä»¶åŠ è¿›æ¥
  await cache.addAll(staticAssets);
  return self.skipWaiting();
});

// ç›‘å¬activateäº‹ä»¶æ¥æ›´æ–°ç¼“å­˜æ•°æ®
self.addEventListener('activate', e => {
  // ä¿è¯ç¬¬ä¸€æ¬¡åŠ è½½fetchè§¦å‘
  self.clients.claim();
});

// ç›‘å¬fetchäº‹ä»¶æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ï¼š
self.addEventListener('fetch', async e => {
  const req = e.request;
  const url = new URL(req.url);
  if (url.origin === location.origin) {
    e.respondWith(cacheFirst(req));
  } else {
    e.respondWith(networkAndCache(req));
  }
});

async function cacheFirst(req) {
  // åˆ¤æ–­å½“å‰è¯·æ±‚æ˜¯å¦éœ€è¦ç¼“å­˜
  const cache = await caches.open(cacheName);
  const cached = await cache.match(req);
  // æœ‰ç¼“å­˜å°±ç”¨ç¼“å­˜ï¼Œæ²¡æœ‰å°±ä»æ–°å‘è¯·æ±‚è·å–
  return cached || fetch(req);
}

async function networkAndCache(req) {
  const cache = await caches.open(cacheName);
  try {
    // ç¼“å­˜æŠ¥é”™è¿˜ç›´æ¥ä»æ–°å‘è¯·æ±‚è·å–
    const fresh = await fetch(req);
    await cache.put(req, fresh.clone());
    return fresh;
  } catch (e) {
    const cached = await cache.match(req);
    return cached;
  }
}
```

åœ¨ `sw.js` ä¸­é‡‡ç”¨çš„æ ‡å‡†çš„ `web worker` çš„ç¼–ç¨‹æ–¹å¼ï¼Œç”±äºè¿è¡Œåœ¨å¦ä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ä¸­ï¼ˆ`self`ï¼‰ï¼Œè¿™ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ä¸åŒäº `window`ï¼Œæ‰€ä»¥é‡‡ç”¨ `self.addEventListener()`ã€‚

`Cache API` æ˜¯ `Service Worker` æä¾›ç”¨æ¥æ“ä½œç¼“å­˜çš„çš„æ¥å£ï¼Œè¿™äº›æ¥å£åŸºäº `Promise` å®ç°ï¼ŒåŒ…æ‹¬ `Cache` å’Œ `Cache Storage`ï¼Œ`Cache` ç›´æ¥å’Œè¯·æ±‚æ‰“äº¤é“ï¼Œä¸ºç¼“å­˜çš„ `Request / Response` å¯¹è±¡å¯¹æä¾›å­˜å‚¨æœºåˆ¶ï¼Œ`CacheStorage` è¡¨ç¤º `Cache` å¯¹è±¡çš„å­˜å‚¨å®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å…¨å±€çš„ `caches` å±æ€§è®¿é—® `Cache API`ã€‚

Cacheç›¸å…³APIè¯´æ˜ï¼š

* `Cache.match(request, options)` è¿”å›ä¸€ä¸ª Promiseå¯¹è±¡ï¼Œresolveçš„ç»“æœæ˜¯è·Ÿ Cache å¯¹è±¡åŒ¹é…çš„ç¬¬ä¸€ä¸ªå·²ç»ç¼“å­˜çš„è¯·æ±‚ã€‚
* `Cache.matchAll(request, options)` è¿”å›ä¸€ä¸ªPromise å¯¹è±¡ï¼Œresolveçš„ç»“æœæ˜¯è·ŸCacheå¯¹è±¡åŒ¹é…çš„æ‰€æœ‰è¯·æ±‚ç»„æˆçš„æ•°ç»„ã€‚
* `Cache.addAll(requests)` æ¥æ”¶ä¸€ä¸ªURLæ•°ç»„ï¼Œæ£€ç´¢å¹¶æŠŠè¿”å›çš„responseå¯¹è±¡æ·»åŠ åˆ°ç»™å®šçš„Cacheå¯¹è±¡ã€‚
* `Cache.delete(request, options)` æœç´¢keyå€¼ä¸ºrequestçš„Cache æ¡ç›®ã€‚å¦‚æœæ‰¾åˆ°ï¼Œåˆ™åˆ é™¤è¯¥Cache æ¡ç›®ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªresolveä¸ºtrueçš„Promiseå¯¹è±¡ï¼›å¦‚æœæœªæ‰¾åˆ°ï¼Œåˆ™è¿”å›ä¸€ä¸ªresolveä¸ºfalseçš„Promiseå¯¹è±¡ã€‚
* `Cache.keys(request, options)` è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œresolveçš„ç»“æœæ˜¯Cacheå¯¹è±¡keyå€¼ç»„æˆçš„æ•°ç»„ã€‚

> æ³¨ï¼šä½¿ç”¨ `request.clone()` å’Œ `response.clone()` æ˜¯å› ä¸º `request` å’Œ `response` æ˜¯ä¸€ä¸ªæµï¼Œåªèƒ½æ¶ˆè€—ä¸€æ¬¡ã€‚ç¼“å­˜æ—¶å·²ç»æ¶ˆè€—ä¸€æ¬¡ï¼Œå†å‘èµ· `HTTP` è¯·æ±‚è¿˜è¦æ¶ˆè€—ä¸€æ¬¡ï¼Œæ­¤æ—¶ä½¿ç”¨ `clone` æ–¹æ³•å…‹éš†è¯·æ±‚ã€‚

è‡³æ­¤ï¼Œå½“å·²å®‰è£…çš„Service Workeré¡µé¢è¢«æ‰“å¼€æ—¶ï¼Œä¾¿ä¼šè§¦å‘ `Service Worker` è„šæœ¬æ›´æ–°ã€‚å½“ä¸Šæ¬¡è„šæœ¬æ›´æ–°å†™å…¥Service Workeræ•°æ®åº“çš„æ—¶é—´æˆ³ä¸æœ¬æ¬¡æ›´æ–°è¶…è¿‡24å°æ—¶ï¼Œä¾¿ä¼šè§¦å‘Service Workerè„šæœ¬æ›´æ–°ã€‚å½“sw.jsæ–‡ä»¶æ”¹å˜æ—¶ï¼Œä¾¿ä¼šè§¦å‘ `Service Worker` è„šæœ¬æ›´æ–°ã€‚æ›´æ–°æµç¨‹ä¸å®‰è£…ç±»ä¼¼ï¼Œåªæ˜¯åœ¨æ›´æ–°å®‰è£…æˆåŠŸåä¸ä¼šç«‹å³è¿›å…¥activeçŠ¶æ€ï¼Œæ›´æ–°åçš„Service Workerä¼šå’ŒåŸå§‹çš„Service Workerå…±åŒå­˜åœ¨ï¼Œå¹¶è¿è¡Œå®ƒçš„installï¼Œä¸€æ—¦æ–°Service Workerå®‰è£…æˆåŠŸï¼Œå®ƒä¼šè¿›å…¥waitçŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…æ—§ç‰ˆæœ¬çš„Service Workerè¿›/çº¿ç¨‹ç»ˆæ­¢ã€‚ self.skipWaiting()å¯ä»¥é˜»æ­¢ç­‰å¾…ï¼Œè®©æ–°Service Workerå®‰è£…æˆåŠŸåç«‹å³æ¿€æ´»ã€‚ self.clients.claim()æ–¹æ³•æ¥è®©æ²¡è¢«æ§åˆ¶çš„ clients å—æ§ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®æœ¬èº«ä¸ºactivateçš„Service Workerã€‚

**å®ç°æ•ˆæœ**
PCç«¯ï¼šWindowsã€‚Macä¸Šé¢chromiumnå†…æ ¸çš„æµè§ˆå™¨ï¼ˆchromeã€operaã€æ–°ç‰ˆedgeï¼‰ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚
![windows](http://127.0.0.1:8080/markdown/windows.png)

ç§»åŠ¨ç«¯ï¼šiPhoneã€‚
![iphone](http://127.0.0.1:8080/markdown/iphone.png)

### æ¨±èŠ±é£˜è½åŠ¨ç”»ğŸŒ¸

ä¸ºå¢å¼ºè§†è§‰æ•ˆæœï¼Œäºæ˜¯åœ¨é¡µé¢å¢åŠ äº† æ¨±èŠ±`ğŸŒ¸` é£˜è½çš„æ•ˆæœã€‚

Element.animate()

Element æ¥å£çš„animate() æ–¹æ³•æ˜¯ä¸€ä¸ªåˆ›å»ºæ–°Animationçš„ä¾¿æ·æ–¹æ³•ï¼Œå°†å®ƒåº”ç”¨äºå…ƒç´ ï¼Œç„¶åè¿è¡ŒåŠ¨ç”»ã€‚å®ƒå°†è¿”å›ä¸€ä¸ªæ–°å»ºçš„ Animation å¯¹è±¡å®ä¾‹

ä¸€ä¸ªå…ƒç´ ä¸Šå¯ä»¥åº”ç”¨å¤šä¸ªåŠ¨ç”»æ•ˆæœã€‚ä½ å¯ä»¥é€šè¿‡è°ƒç”¨æ­¤å‡½æ•°è·å¾—è¿™äº›åŠ¨ç”»æ•ˆæœçš„ä¸€ä¸ªåˆ—è¡¨ï¼š Element.getAnimations() (en-US).

è¯­æ³•
var animation = element.animate(keyframes, options); 
å‚æ•°
keyframes å…³é”®å¸§
ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨å…³é”®å¸§çš„ä¸€ä¸ªé›†åˆ

options å¯é€‰é¡¹
ä»£è¡¨åŠ¨ç”»æŒç»­æ—¶é—´çš„æ•´å½¢æ•°å­— (ä»¥æ¯«ç§’ä¸ºå•ä½), æˆ–è€…ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ—¶é—´å±æ€§çš„å¯¹è±¡ï¼š
id å¯é€‰
åœ¨ animate()é‡Œå¯ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„å±æ€§: ä¸€ä¸ªç”¨æ¥å¼•ç”¨åŠ¨ç”»çš„å­—ç¬¦ä¸²ï¼ˆ DOMString ï¼‰
delay Optional
The number of milliseconds to delay the start of the animation. Defaults to 0.
direction Optional
Whether the animation runs forwards (normal), backwards (reverse), switches direction after each iteration (alternate), or runs backwards and switches direction after each iteration (alternate-reverse). Defaults to "normal".
duration Optional
The number of milliseconds each iteration of the animation takes to complete. Defaults to 0. Although this is technically optional, keep in mind that your animation will not run if this value is 0.
easing Optional
The rate of the animation's change over time. Accepts the pre-defined values "linear", "ease", "ease-in", "ease-out", and "ease-in-out", or a custom "cubic-bezier" value like "cubic-bezier(0.42, 0, 0.58, 1)". Defaults to "linear".
endDelay Optional
The number of milliseconds to delay after the end of an animation. This is primarily of use when sequencing animations based on the end time of another animation. Defaults to 0.
fill Optional
Dictates whether the animation's effects should be reflected by the element(s) prior to playing ("backwards"), retained after the animation has completed playing ("forwards"), or both. Defaults to "none".
iterationStart Optional
Describes at what point in the iteration the animation should start. 0.5 would indicate starting halfway through the first iteration for example, and with this value set, an animation with 2 iterations would end halfway through a third iteration. Defaults to 0.0.
iterations Optional
The number of times the animation should repeat. Defaults to 1, and can also take a value of Infinity to make it repeat for as long as the element exists.
æœªæ¥çš„å¯é€‰é¡¹
ä¸‹é¢çš„å¯é€‰é¡¹ç›®å‰å¹¶éåœ¨æ‰€æœ‰åœ°æ–¹éƒ½å¯ç”¨ï¼Œä½†æœªæ¥å°†ä¼šè¢«åŠ è¿›æ¥

composite å¯é€‰ åˆæˆ
å†³å®šåŠ¨ç”»å½¼æ­¤ä¹‹é—´çš„å€¼å¦‚ä½•ç»“åˆèµ·æ¥, å•ç‹¬çš„åŠ¨ç”»ä¸æŒ‡å®šè‡ªå·±çš„ç‰¹å®šå¤åˆæ“ä½œã€‚ é»˜è®¤ä¸º replace.
add è¡¨ç¤ºè¿½åŠ å½±å“,æ¯ä¸€æ¬¡è¿ç»­çš„è¿­ä»£å»ºç«‹åœ¨å‰ä¸€ä¸ªçš„åŸºç¡€ä¸Šã€‚ æ¯”å¦‚transform, translateX(-200px) å°†ä¸ä¼šè¦†ç›– rotate(20deg) çš„å€¼ï¼Œæœ€ç»ˆç»“æœæ˜¯ translateX(-200px) rotate(20deg)
accumulate æ•ˆæœç±»ä¼¼ä½†æ˜¯æ›´æ™ºèƒ½ä¸€äº›: blur(2) å’Œblur(5) çš„ç»“æœä¸ºblur(7), è€Œä¸æ˜¯ blur(2) blur(5)
replace æ–°çš„å€¼å°†ä¼šè¦†ç›–æ‰æ—§çš„
iterationComposite å¯é€‰ è¿­ä»£åˆæˆ
å†³å®šåŠ¨ç”»è¿­ä»£ä¹‹é—´çš„å€¼å¦‚ä½•ç»“åˆèµ·æ¥ï¼Œ å¯ä»¥è¢«è®¾ç½®ä¸º accumulate æˆ–è€… replace ï¼ˆåŒä¸Šï¼‰ã€‚é»˜è®¤å€¼ä¸º replace.
spacing å¯é€‰
å†³å®šåœ¨åŠ¨ç”»æŒç»­æ—¶é—´å†…å¦‚ä½•åˆ†é…æ²¡æœ‰æ—¶é—´åç§»çš„å…³é”®å¸§. é»˜è®¤å€¼ä¸ºdistribute.
distribute åˆ†é…çš„å…³é”®å¸§ä½ç½®ï¼Œä½¿è¿ç»­å…³é”®å¸§ä¹‹é—´çš„è·ç¦»ç›¸ç­‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ²¡æœ‰ä»»ä½•åç§»æ—¶ï¼Œå°†ä¼šä½¿å…³é”®å¸§å‡åŒ€åˆ†åˆ°æ•´ä¸ªè¿è¡Œæ—¶é—´å†…
paced åˆ†é…çš„å…³é”®å¸§ä½ç½®ï¼Œä½¿è¿ç»­å…³é”®å¸§ä¹‹é—´çš„è·ç¦»è®©æŸä¸ªæ­¥å¢çš„å±æ€§å€¼çš„å¢é•¿é€Ÿåº¦ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå±æ€§å€¼å·®å¼‚è¶Šå¤§ï¼Œå…³é”®å¸§ä¹‹é—´çš„è·ç¦»è¶Šè¿œã€‚

å®Œæ•´ä»£ç å¯æŸ¥çœ‹æ–‡åé“¾æ¥ `ğŸ”—`ã€‚

![petals](http://127.0.0.1:8080/markdown/petals.gif)

```html
<div id="petals_container">
  <div class="petal"></div>
  <!-- ... -->
  <div class="petal"></div>
</div>
```

```js
var petalPlayers = [];
function animatePetals() {
  var petals = document.querySelectorAll('.petal');
  if (!petals[0].animate) {
    var petalsContainer = document.getElementById('petals_container');
    return false;
  }
  for (var i = 0, len = petals.length; i < len; ++i) {
    var petal = petals[i];
    petal.innerHTML = '<div class="rotate"><img src="petal.png" class="askew"></div>';
    var scale = Math.random() * .6 + .2;
    var player = petal.animate([{
        transform: 'translate3d(' + (i / len * 100) + 'vw,0,0) scale(' + scale + ')',
        opacity: scale
      },
      {
        transform: 'translate3d(' + (i / len * 100 + 10) + 'vw,150vh,0) scale(' + scale + ')',
        opacity: 1
      }
    ], {
      duration: Math.random() * 90000 + 8000,
      iterations: Infinity,
      delay: -(Math.random() * 5000)
    });
    petalPlayers.push(player);
  }
}
animatePetals();
```

```css
.petal {
  display: inline-block;
  position: absolute;
  top: -10rem;
  bottom: 0;
  z-index: 150;
}
.petal .rotate {
  animation: driftyRotate 1s infinite both ease-in-out;
  perspective: 1000;
}
.petal .askew {
  background: currentColor;
  transform: skewY(10deg);
  display: block;
  animation: drifty 1s infinite alternate both ease-in-out;
  perspective: 1000;
}
.petal {
  color: rgba(0, 0, 0, 0);
}
.petal:nth-of-type(7n) .askew {
  animation-delay: -.6s;
  animation-duration: 2.25s;
}
.petal:nth-of-type(7n + 1) .askew {
  animation-delay: -.879s;
  animation-duration: 3.5s;
}
/* ... */
.petal:nth-of-type(9n) .rotate {
  animation-duration: 2s;
}
.petal:nth-of-type(9n + 1) .rotate {
  animation-duration: 2.3s;
}
/* ... */
@keyframes drifty {
  0% {
    transform: skewY(10deg) translate3d(-250%, 0, 0);
    display: block;
  }
  100% {
    transform: skewY(-12deg) translate3d(250%, 0, 0);
    display: block;
  }
}
@keyframes driftyRotate {
  0% {
    transform: rotateX(0);
    display: block;
  }
  100% {
    transform: rotateX(359deg);
    display: block;
  }
}
```

### CSSåˆ¤æ–­æ‰‹æœºæ¨ªå±

ç”±äºè¿™ä¸ª `50éŸ³å°æ¸¸æˆ` åº”ç”¨æ˜¯é’ˆå¯¹ç§»åŠ¨ç«¯å¼€å‘ï¼Œæœªä½œpcç«¯çš„æ ·å¼é€‚é…ï¼Œæ‰€ä»¥å¯ä»¥æ·»åŠ ä¸€ä¸ªæ¨ªå±å¼•å¯¼é¡µé¢æç¤ºç”¨æˆ·ä½¿ç”¨ç«–å±ã€‚åœ¨ `CSS` ä¸­åˆ¤æ–­ç§»åŠ¨è®¾å¤‡æ˜¯å¦å¤„äºæ¨ªå±çŠ¶æ€ï¼Œéœ€è¦ç”¨åˆ° `aspect-ratio` è¿›è¡Œåª’ä½“æŸ¥è¯¢ï¼Œé€šè¿‡æµ‹è¯• `viewport` çš„å®½é«˜æ¯”æ¥è¿›è¡Œåˆ¤æ–­ã€‚

`aspect-ratio`å®½é«˜æ¯”å±æ€§è¢«æŒ‡å®šä¸º `<ratio>` å€¼æ¥ä»£è¡¨ `viewport` çš„å®½é«˜æ¯”ã€‚å…¶ä¸ºä¸€ä¸ªèŒƒå›´ï¼Œå¯ä»¥ä½¿ç”¨ `min-aspect-ratio` å’Œ `max-aspect-ratio` åˆ†åˆ«æŸ¥è¯¢æœ€å°å’Œæœ€å¤§å€¼ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š

```css
/* æœ€å°å®½é«˜æ¯” */
@media (min-aspect-ratio: 8/5) {
  // ...
}
/* æœ€å¤§å®½é«˜æ¯” */
@media (max-aspect-ratio: 3/2) {
  // ...
}
/* æ˜ç¡®çš„å®½é«˜æ¯”, æ”¾åœ¨æœ€ä¸‹éƒ¨é˜²æ­¢åŒæ—¶æ»¡è¶³æ¡ä»¶æ—¶çš„è¦†ç›– */
@media (aspect-ratio: 1/1) {
  // ...
}
```

åœ¨åº”ç”¨ä¸­çš„å…·ä½“å®ç°æ–¹å¼æ˜¯æ·»åŠ ä¸€ä¸ª `.mod_orient_layer` å¼•å¯¼å±‚å¹¶éšè—ï¼Œå½“è¾¾åˆ°æœ€å°å®½é«˜æ¯”æ—¶å°†å…¶æ˜¾ç¤ºï¼š

```html
<div class="mod_orient_layer"></div>
```

```css
.mod_orient_layer {
  display: none;
  position: fixed;
  height: 100%;
  width: 100%;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
  background: #FFFFFF url('landscape.png') no-repeat center;
  background-size: auto 100%;
}
@media screen and (min-aspect-ratio: 13/8) {
  .mod_orient_layer {
    display: block;
  }
}
```

å®ç°æ•ˆæœï¼š

![landscape](http://127.0.0.1:8080/markdown/landscape.png)

## å…¼å®¹æ€§

![caniuse](http://127.0.0.1:8080/markdown/caniuse.png)

## Photoshop æŠ€èƒ½

### logoè®¾è®¡

![logo](http://127.0.0.1:8080/markdown/logo.png)

> `â›©` é¸Ÿå±…åŸå§‹æ¨¡å‹æ¥æºäº `dribbble`ï¼š <https://dribbble.com>

## å¤–éƒ¨é“¾æ¥åŠå‚è€ƒèµ„æ–™

* æ¨±èŠ±æ•£è½åŠ¨ç”»å®Œæ•´ç‰ˆ <https://codepen.io/dragonir/full/WNjEPwW>
* <https://webkit.org/blog/8840/dark-mode-support-in-webkit>
* PWAæŠ€æœ¯ç†è®º+å®æˆ˜å…¨è§£æ <https://www.cnblogs.com/yangyangxxb/p/9964959.html>
* H5 PWAæŠ€æœ¯ <https://zhuanlan.zhihu.com/p/144512343>
* aspect-ratio <https://developer.mozilla.org/zh-CN/docs/Web/CSS/@media/aspect-ratio>
* Service Worker <https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API>
* Element.animate() <https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate>
